
# ğŸ¬ Blazor Film VeritabanÄ± UygulamasÄ± (BÃ¶lÃ¼m 3 - Razor BileÅŸenleri HakkÄ±nda Bilgi Edinme)

## ğŸ§° AraÃ§ SeÃ§imi

Bu makale, bir film veritabanÄ±nÄ± yÃ¶netme Ã¶zelliklerine sahip bir ASP.NET Core Blazor Web UygulamasÄ± oluÅŸturmayÄ± Ã¶ÄŸreten Blazor film veritabanÄ± uygulamasÄ± eÄŸitim serisinin Ã¼Ã§Ã¼ncÃ¼ bÃ¶lÃ¼mÃ¼dÃ¼r.

Bu bÃ¶lÃ¼m, uygulamaya eklenen Razor bileÅŸenlerini inceler ve film verilerinin gÃ¶rÃ¼ntÃ¼lenmesi iÃ§in iyileÅŸtirmeler yapar.

---

## ğŸ§© Razor BileÅŸenleri

Blazor uygulamalarÄ±, genellikle yalnÄ±zca bileÅŸenler olarak adlandÄ±rÄ±lan **Razor bileÅŸenleri** Ã¼zerine kuruludur.

Bir bileÅŸen, bir sayfa, iletiÅŸim kutusu veya veri giriÅŸ formu gibi kullanÄ±cÄ± arayÃ¼zÃ¼ Ã¶ÄŸesidir.

BileÅŸenler, .NET derlemelerine yerleÅŸtirilmiÅŸ .NET C# sÄ±nÄ±flarÄ±dÄ±r.

 **Razor** , genellikle istemci tarafÄ± kullanÄ±cÄ± arayÃ¼zÃ¼ mantÄ±ÄŸÄ± ve bileÅŸim iÃ§in **.razor** dosya uzantÄ±sÄ±na sahip Razor biÃ§imlendirme sayfasÄ± biÃ§iminde yazÄ±lÄ±r.

Razor, HTML biÃ§imlendirmesini geliÅŸtirici verimliliÄŸi iÃ§in tasarlanmÄ±ÅŸ C# koduyla birleÅŸtiren bir sÃ¶zdizimidir.

GeliÅŸtiriciler genellikle â€œBlazor bileÅŸenleriâ€ terimini kullansa da, belgelerde resmi olarak â€œRazor bileÅŸenleriâ€ (veya sadece â€œbileÅŸenlerâ€) ifadesi kullanÄ±lÄ±r.

---

## ğŸ§  Bir Razor BileÅŸeninin YapÄ±sÄ±

Bir Razor bileÅŸeninin genel dÃ¼zeni ÅŸu ÅŸekildedir:

1. **YÃ¶nergeler bÃ¶lÃ¼mÃ¼:** DosyanÄ±n baÅŸÄ±nda yer alÄ±r ve bileÅŸenin nasÄ±l derleneceÄŸini veya Ã§alÄ±ÅŸacaÄŸÄ±nÄ± belirtir.
2. **BiÃ§imlendirme bÃ¶lÃ¼mÃ¼:** HTML ve Razor ifadelerini iÃ§erir, kullanÄ±cÄ±ya neyin gÃ¶rÃ¼ntÃ¼leneceÄŸini belirler.
3. **Kod bloÄŸu:** `@code { }` iÃ§inde tanÄ±mlanÄ±r ve C# Ã¼yeleri, parametreleri ve olay iÅŸleyicilerini iÃ§erir.

---

### ğŸ“„ Ã–rnek: `Welcome.razor`

```razor
@page "/welcome"

<PageTitle>Welcome!</PageTitle>

<h1>Welcome to Blazor!</h1>

<p>@welcomeMessage</p>

@code {
    private string welcomeMessage = "We â¤ï¸ Blazor!";
}
```

* `@page` yÃ¶nergesi, bileÅŸenin `/welcome` adresinde gÃ¶rÃ¼ntÃ¼leneceÄŸini belirtir.
* `<PageTitle>` bileÅŸeni sayfa baÅŸlÄ±ÄŸÄ±nÄ± ayarlar.
* `<h1>` etiketi iÃ§eriÄŸin ilk baÅŸlÄ±ÄŸÄ±dÄ±r.
* `@welcomeMessage`, bir C# deÄŸiÅŸkeninin Razor sÃ¶zdizimiyle HTML iÃ§inde nasÄ±l gÃ¶rÃ¼ntÃ¼lendiÄŸini gÃ¶sterir.
* `@code` bloÄŸu iÃ§inde, bileÅŸenin Ã¶zel alanlarÄ± ve kod mantÄ±ÄŸÄ± bulunur.

---

## ğŸ§­ NavMenu BileÅŸeni (Gezinme)

**NavMenu** bileÅŸeni (`Components/Layout/NavMenu.razor`), **NavLink** bileÅŸenlerini kullanarak kenar Ã§ubuÄŸu gezinmesini saÄŸlar.

 **NavLink** , bir `<a>` etiketi gibi davranÄ±r ancak geÃ§erli URL eÅŸleÅŸtiÄŸinde aktif bir CSS sÄ±nÄ±fÄ± uygular.

Bu, kullanÄ±cÄ±nÄ±n hangi sayfanÄ±n aktif olduÄŸunu gÃ¶rmesini saÄŸlar.

* `Match="NavLinkMatch.All"` â†’ baÄŸlantÄ±nÄ±n URL ile tamamen eÅŸleÅŸmesi durumunda aktif olmasÄ±nÄ± saÄŸlar.
* `NavLink` Blazor Ã§erÃ§evesine dahildir.
* `NavMenu` ise sadece proje ÅŸablonlarÄ±nÄ±n bir parÃ§asÄ±dÄ±r.

---

### ğŸ“„ `Components/Layout/NavMenu.razor`

```razor
<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="">BlazorWebAppMovies</a>
    </div>
</div>

<input type="checkbox" title="Navigation menu" class="navbar-toggler" />

<div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()">
    <nav class="flex-column">
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> Home
            </NavLink>
        </div>

        <div class="nav-item px-3">
            <NavLink class="nav-link" href="weather">
                <span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Weather
            </NavLink>
        </div>
    </nav>
</div>
```

---

### ğŸª„ Marka AdÄ±nÄ± DeÄŸiÅŸtir

Ä°lk `<div>` iÃ§indeki baÄŸlantÄ± metnini ÅŸu ÅŸekilde gÃ¼ncelleyin:

```diff
- <a class="navbar-brand" href="">BlazorWebAppMovies</a>
+ <a class="navbar-brand" href="">Sci-fi Movies</a>
```

---

### ğŸï¸ â€œMoviesâ€ SayfasÄ± BaÄŸlantÄ±sÄ±nÄ± Ekle

Weather baÄŸlantÄ±sÄ±ndan hemen sonra aÅŸaÄŸÄ±daki kodu ekleyin:

```razor
<div class="nav-item px-3">
    <NavLink class="nav-link" href="movies">
        <span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Movies
    </NavLink>
</div>
```

---

### âœ… Son Hali

```razor
<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="">Sci-fi Movies</a>
    </div>
</div>

<input type="checkbox" title="Navigation menu" class="navbar-toggler" />

<div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()">
    <nav class="nav flex-column">
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> Home
            </NavLink>
        </div>

        <div class="nav-item px-3">
            <NavLink class="nav-link" href="weather">
                <span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Weather
            </NavLink>
        </div>

        <div class="nav-item px-3">
            <NavLink class="nav-link" href="movies">
                <span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Movies
            </NavLink>
        </div>
    </nav>
</div>
```

---

## ğŸš€ UygulamayÄ± Ã‡alÄ±ÅŸtÄ±rma

UygulamayÄ± Ã§alÄ±ÅŸtÄ±rÄ±n ve kenar Ã§ubuÄŸunda:

* Ãœstte **Sci-fi Movies** markasÄ±nÄ±n gÃ¶rÃ¼ntÃ¼lendiÄŸini,
* Yeni **Movies** baÄŸlantÄ±sÄ±nÄ±n eklendiÄŸini gÃ¶receksiniz.


![1762701517416](image/5.1_BuildaBlazormoviedatabaseapp(Part3-LearnaboutRazorcomponents)/1762701517416.png)


# ğŸ¬ Blazor Film VeritabanÄ± UygulamasÄ± (BÃ¶lÃ¼m 3 - Razor BileÅŸenleri HakkÄ±nda Bilgi Edinme)

## ğŸ§± MainLayout BileÅŸeni (YerleÅŸim)

**MainLayout** bileÅŸeni, uygulamanÄ±n  **varsayÄ±lan yerleÅŸimidir** .

Bu bileÅŸen, yerleÅŸimi temsil eden bileÅŸenler iÃ§in temel sÄ±nÄ±f olan **LayoutComponentBase** sÄ±nÄ±fÄ±ndan tÃ¼retilmiÅŸtir.

YerleÅŸimi kullanan tÃ¼m bileÅŸenler, **@Body** ifadesinin bulunduÄŸu yerde iÅŸlenir.

---

### ğŸ“„ `Components/Layout/MainLayout.razor`

```razor
@inherits LayoutComponentBase

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <div class="top-row px-4">
            <a href="https://learn.microsoft.com/aspnet/core/" target="_blank">About</a>
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>
```

---

### ğŸ§© AÃ§Ä±klama

* **NavMenu** bileÅŸeni kenar Ã§ubuÄŸunda gÃ¶rÃ¼ntÃ¼lenir.

  Razor biÃ§imlendirmesinde yalnÄ±zca bileÅŸenin adÄ±nÄ± HTML etiketi olarak yazmak, o bileÅŸeni Ã§aÄŸÄ±rmak iÃ§in yeterlidir.

  Bu, bileÅŸenleri birbirine ve HTML dÃ¼zenine gÃ¶mmenize olanak tanÄ±r.
* `<main>` etiketi iÃ§eriÄŸinde:

  * **About** baÄŸlantÄ±sÄ±: KullanÄ±cÄ±yÄ± ASP.NET Core belgelerine yÃ¶nlendirir.
  * `<article>` etiketi: `@Body` parametresini iÃ§erir ve yerleÅŸimi kullanan bileÅŸenlerin burada iÅŸlenmesini saÄŸlar.
  * **Hata ArayÃ¼zÃ¼** (`<div id="blazor-error-ui" ...>`): Ä°ÅŸlenmemiÅŸ hatalar iÃ§in bildirim alanÄ±dÄ±r.

---

### âš™ï¸ VarsayÄ±lan YerleÅŸim AyarÄ±

VarsayÄ±lan yerleÅŸim bileÅŸeni (`MainLayout`) aÅŸaÄŸÄ±daki gibi **Routes** bileÅŸeninde tanÄ±mlanÄ±r:

```razor
<RouteView RouteData="routeData" DefaultLayout="typeof(Layout.MainLayout)" />
```

Her bileÅŸen kendi Ã¶zel yerleÅŸimini belirleyebilir veya bir klasÃ¶r iÃ§indeki tÃ¼m bileÅŸenler iÃ§in `_Imports.razor` dosyasÄ± aracÄ±lÄ±ÄŸÄ±yla ortak bir yerleÅŸim uygulanabilir.

Bu Ã¶zellikler Blazor belgelerinde ayrÄ±ntÄ±lÄ± olarak anlatÄ±lmÄ±ÅŸtÄ±r.

---

## ğŸ§¾ CRUD (OluÅŸtur, Oku, GÃ¼ncelle, Sil) BileÅŸenleri

AÅŸaÄŸÄ±daki bÃ¶lÃ¼mler, film veritabanÄ± bileÅŸenlerinin yapÄ±sÄ±nÄ± ve iÅŸleyiÅŸini aÃ§Ä±klar.

---

## ğŸ“‹ Index BileÅŸeni

`Components/Pages/Movies/Index.razor` dosyasÄ±nÄ± aÃ§Ä±n ve dosyanÄ±n en Ã¼stÃ¼ndeki Razor yÃ¶nergelerini inceleyin.

### ğŸ“ YÃ¶nergeler

* `@page` â†’ SayfanÄ±n URL rotasÄ± `/movies` olarak ayarlanÄ±r.
* `@using` â†’ Åu APIâ€™lere eriÅŸim saÄŸlar:
  * `Microsoft.EntityFrameworkCore`
  * `Microsoft.AspNetCore.Components.QuickGrid`
  * `BlazorWebAppMovies.Models`
  * `BlazorWebAppMovies.Data`
* `@inject` â†’ `IDbContextFactory<BlazorWebAppMoviesContext>` veritabanÄ± baÄŸlamÄ± fabrikasÄ±nÄ± enjekte eder.
* `@implements` â†’ `IAsyncDisposable` arayÃ¼zÃ¼ ile veritabanÄ± baÄŸlamÄ±nÄ±n serbest bÄ±rakÄ±lmasÄ±nÄ± saÄŸlar.

---

### ğŸ§± BaÅŸlÄ±k ve BaÅŸlÄ±k Etiketleri

```razor
<PageTitle>Index</PageTitle>

<h1>Index</h1>
```

Yeni bir film ekleme baÄŸlantÄ±sÄ±:

```razor
<p>
    <a href="movies/create">Create New</a>
</p>
```

---

### ğŸï¸ QuickGrid BileÅŸeni

Film verilerini tablo ÅŸeklinde gÃ¶stermek iÃ§in **QuickGrid** kullanÄ±lÄ±r:

```razor
<QuickGrid Class="table" Items="context.Movie">
    <PropertyColumn Property="movie => movie.Title" />
    <PropertyColumn Property="movie => movie.ReleaseDate" />
    <PropertyColumn Property="movie => movie.Genre" />
    <PropertyColumn Property="movie => movie.Price" />

    <TemplateColumn Context="movie">
        <a href="@($"movies/edit?id={movie.Id}")">Edit</a> |
        <a href="@($"movies/details?id={movie.Id}")">Details</a> |
        <a href="@($"movies/delete?id={movie.Id}")">Delete</a>
    </TemplateColumn>
</QuickGrid>
```

---

### ğŸ’» Kod BloÄŸu

```razor
@code {
    private BlazorWebAppMoviesContext context = default!;

    protected override void OnInitialized()
    {
        context = DbFactory.CreateDbContext();
    }

    public async ValueTask DisposeAsync() => await context.DisposeAsync();
}
```

#### AÃ§Ä±klama:

* `context`: VeritabanÄ± baÄŸlamÄ±nÄ± temsil eder.
* `OnInitialized()`: BaÄŸlamÄ± fabrika Ã¼zerinden oluÅŸturur.
* `DisposeAsync()`: BileÅŸen kapatÄ±ldÄ±ÄŸÄ±nda baÄŸlamÄ± serbest bÄ±rakÄ±r.

---

### ğŸ§© Razor Ä°fadeleri

* `Context="movie"` â†’ Her satÄ±rdaki veri nesnesine `movie` ismiyle eriÅŸmeyi saÄŸlar.
* `@($"movies/edit?id={movie.Id}")` â†’ Film kimliÄŸini (`Id`) URLâ€™ye ekler.

  Ã–rneÄŸin: `movies/edit?id=3`.

---

### ğŸ§  SÃ¼tun BaÅŸlÄ±klarÄ±nÄ± GÃ¼ncelle

Film modeli Ã¶zelliklerinden alÄ±nan sÃ¼tun adlarÄ± birleÅŸtirilmiÅŸ ÅŸekilde gelir (`ReleaseDate`).

Ä°ki kelime arasÄ±nda boÅŸluk eklemek iÃ§in sÃ¼tun baÅŸlÄ±ÄŸÄ±nÄ± ÅŸu ÅŸekilde gÃ¼ncelleyin:

```diff
- <PropertyColumn Property="movie => movie.ReleaseDate" />
+ <PropertyColumn Property="movie => movie.ReleaseDate" Title="Release Date" />
```

---

## â–¶ï¸ UygulamayÄ± Ã‡alÄ±ÅŸtÄ±rma

UygulamayÄ± Ã§alÄ±ÅŸtÄ±rÄ±n ve â€œRelease Dateâ€ sÃ¼tununun iki kelimeli olarak gÃ¶rÃ¼ntÃ¼lendiÄŸini doÄŸrulayÄ±n.

---

## â¹ï¸ UygulamayÄ± Durdurma

UygulamayÄ± durdurmak iÃ§in:

* TarayÄ±cÄ± penceresini kapatÄ±n
* **VS Code** â€™da **Shift + F5** tuÅŸlarÄ±na basÄ±n.

---

## ğŸ¬ Details BileÅŸeni

`Components/Pages/Movies/Details.razor` dosyasÄ±nÄ± aÃ§Ä±n.

### ğŸ“„ YÃ¶nergeler

```razor
@page "/movies/details"
@using Microsoft.EntityFrameworkCore
@using BlazorWebAppMovies.Models
@inject IDbContextFactory<BlazorWebAppMovies.Data.BlazorWebAppMoviesContext> DbFactory
@inject NavigationManager NavigationManager
```

Film, sorgu dizgisinden (`query string`) gelen kimliÄŸe (`Id`) gÃ¶re yÃ¼klenir.

Film yÃ¼klenmemiÅŸse:

```razor
@if (movie is null)
{
    <p><em>Loading...</em></p>
}
```

---

### ğŸï¸ Film Detay GÃ¶rÃ¼nÃ¼mÃ¼

```razor
<dl>
    <dt>Title</dt>
    <dd>@movie.Title</dd>
    <dt>Release Date</dt>
    <dd>@movie.ReleaseDate</dd>
    <dt>Genre</dt>
    <dd>@movie.Genre</dd>
    <dt>Price</dt>
    <dd>@movie.Price</dd>
</dl>
<div>
    <a href="@($"/movies/edit?id={movie.Id}")">Edit</a> |
    <a href="@($"/movies")">Back to List</a>
</div>
```

---

### ğŸ’» Kod BloÄŸu

```csharp
private Movie? movie;

[SupplyParameterFromQuery]
private int Id { get; set; }

protected override async Task OnInitializedAsync()
{
    using var context = DbFactory.CreateDbContext();
    movie = await context.Movie.FirstOrDefaultAsync(m => m.Id == Id);

    if (movie is null)
    {
        NavigationManager.NavigateTo("notfound");
    }
}
```

---

### ğŸ§© AÃ§Ä±klama

* `movie`: `Movie` tÃ¼rÃ¼nde, null olabilen Ã¶zel alan.
* `[SupplyParameterFromQuery]`: `Id` deÄŸerinin sorgu dizisinden alÄ±nmasÄ±nÄ± saÄŸlar.
* `OnInitializedAsync()`: BileÅŸen yÃ¼klendiÄŸinde Ã§alÄ±ÅŸÄ±r ve film verisini getirir.
* `NavigationManager.NavigateTo("notfound")`: Film bulunmazsa kullanÄ±cÄ±yÄ± olmayan bir sayfaya yÃ¶nlendirir.

Blazor, sunucu tarafÄ± iÅŸleme (SSR) sÄ±rasÄ±nda **404 hata kodu** dÃ¶ndÃ¼remez.

Bu nedenle, geÃ§ici Ã§Ã¶zÃ¼m olarak var olmayan bir uÃ§ noktaya yÃ¶nlendirilir.

Dilerseniz bunun yerine kullanÄ±cÄ±ya uygun bir mesaj gÃ¶sterebilir veya Ã¶zel bir â€œNot Foundâ€ bileÅŸeni oluÅŸturabilirsiniz.


# ğŸ¬ Blazor Film VeritabanÄ± UygulamasÄ± (BÃ¶lÃ¼m 3 - Razor BileÅŸenleri HakkÄ±nda Bilgi Edinme)

## ğŸ†• Create BileÅŸeni

`Components/Pages/Movies/Create.razor` dosyasÄ±nÄ± aÃ§Ä±n.

Bu bileÅŸen, kullanÄ±cÄ±dan veri giriÅŸi almak ve doÄŸrulama yapmak iÃ§in yerleÅŸik bir bileÅŸen olan **EditForm** kullanÄ±r.

---

### ğŸ“„ `Create.razor`

```razor
<EditForm method="post" Model="Movie" OnValidSubmit="AddMovie" FormName="create" Enhance>
    <DataAnnotationsValidator />
    <ValidationSummary role="alert" />
    <div>
        <label for="title">Title:</label> 
        <InputText id="title" @bind-Value="Movie.Title" /> 
        <ValidationMessage For="() => Movie.Title" /> 
    </div>
    <div>
        <label for="releasedate">ReleaseDate:</label> 
        <InputDate id="releasedate" @bind-Value="Movie.ReleaseDate" /> 
        <ValidationMessage For="() => Movie.ReleaseDate" /> 
    </div>
    <div>
        <label for="genre">Genre:</label> 
        <InputText id="genre" @bind-Value="Movie.Genre" /> 
        <ValidationMessage For="() => Movie.Genre" /> 
    </div>
    <div>
        <label for="price">Price:</label> 
        <InputNumber id="price" @bind-Value="Movie.Price" /> 
        <ValidationMessage For="() => Movie.Price" /> 
    </div>
    <button type="submit">Create</button>
</EditForm>
```

---

### âœï¸ Etiket DÃ¼zeltmesi

Film Ã§Ä±kÄ±ÅŸ tarihi etiketine boÅŸluk ekleyin:

```diff
- <label for="releasedate" class="form-label">ReleaseDate:</label>
+ <label for="releasedate" class="form-label">Release Date:</label>
```

---

### ğŸ§© AÃ§Ä±klama

* `Model="Movie"` â†’ Formun baÄŸlÄ± olduÄŸu modeli belirtir.
* `OnValidSubmit="AddMovie"` â†’ Form baÅŸarÄ±yla doÄŸrulandÄ±ÄŸÄ±nda Ã§aÄŸrÄ±lacak metodu belirtir.
* `FormName="create"` â†’ Sayfada birden fazla form olduÄŸunda Ã§akÄ±ÅŸmayÄ± Ã¶nlemek iÃ§in form adÄ± atar.
* `Enhance` â†’ Sunucu tarafÄ± iÅŸleme (SSR) sÄ±rasÄ±nda formun tam sayfa yenilemesi olmadan gÃ¶nderilmesini saÄŸlar.

---

### âœ… DoÄŸrulama

* **DataAnnotationsValidator** â†’ Veri ek aÃ§Ä±klamalarÄ±na (Data Annotations) dayalÄ± doÄŸrulamayÄ± etkinleÅŸtirir.
* **ValidationSummary** â†’ TÃ¼m doÄŸrulama hatalarÄ±nÄ± listeler.
* **ValidationMessage** â†’ Her form alanÄ±na Ã¶zel hata mesajÄ± gÃ¶sterir.

Blazor, **EditForm** ve Ã§eÅŸitli giriÅŸ bileÅŸenleriyle (`InputText`, `InputDate<TValue>`, `InputNumber<TValue>`) form oluÅŸturmayÄ± kolaylaÅŸtÄ±rÄ±r.

Her giriÅŸ bileÅŸeni, modelin bir Ã¶zelliÄŸine `@bind-Value` sÃ¶zdizimiyle baÄŸlanÄ±r.

---

### ğŸ’» Kod BloÄŸu

```csharp
@code {
    [SupplyParameterFromForm]
    private Movie Movie { get; set; } = new();

    private async Task AddMovie()
    {
        using var context = DbFactory.CreateDbContext();
        context.Movie.Add(Movie);
        await context.SaveChangesAsync();
        NavigationManager.NavigateTo("/movies");
    }
}
```

#### ğŸ“˜ AÃ§Ä±klama:

* `[SupplyParameterFromForm]` â†’ `Movie` modelini forma baÄŸlar.
* `AddMovie()` â†’ Form gÃ¶nderildiÄŸinde Ã§alÄ±ÅŸÄ±r.
  * Film verisini ekler.
  * `SaveChangesAsync()` ile kaydeder.
  * KullanÄ±cÄ±yÄ± `/movies` sayfasÄ±na yÃ¶nlendirir.

---

> âš ï¸ **UyarÄ±:**
>
> Bu Ã¶rnekte Ã¶nemli olmasa da, form verilerini doÄŸrudan modelle baÄŸlamak **overposting (aÅŸÄ±rÄ± gÃ¶nderim)** saldÄ±rÄ±larÄ±na karÅŸÄ± hassas olabilir.
>
> AyrÄ±ntÄ±lar aÅŸaÄŸÄ±da aÃ§Ä±klanmÄ±ÅŸtÄ±r.

---

## ğŸ—‘ï¸ Delete BileÅŸeni

`Components/Pages/Movies/Delete.razor` dosyasÄ±nÄ± aÃ§Ä±n.

### âœï¸ Etiket DÃ¼zeltmesi

```diff
- <dt class="col-sm-2">ReleaseDate</dt>
+ <dt class="col-sm-2">Release Date</dt>
```

---

### ğŸ”˜ Silme Butonu

```razor
<button type="submit" disabled="@(movie is null)">Delete</button>
```

Butonun `disabled` durumu, film nesnesinin dolu olup olmamasÄ±na gÃ¶re belirlenir.

Bu, **explicit Razor expression** `@(...)` ile yapÄ±lÄ±r.

---

### ğŸ’» Kod BloÄŸu

```csharp
private async Task DeleteMovie()
{
    using var context = DbFactory.CreateDbContext();
    context.Movie.Remove(movie!);
    await context.SaveChangesAsync();
    NavigationManager.NavigateTo("/movies");
}
```

#### ğŸ“˜ AÃ§Ä±klama:

* `movie!` â†’  **null-forgiving operator** , C#â€™ta null uyarÄ±larÄ±nÄ± bastÄ±rmak iÃ§in kullanÄ±lÄ±r.
* `DeleteMovie()` â†’ Filmi siler, deÄŸiÅŸiklikleri kaydeder ve `/movies` sayfasÄ±na yÃ¶nlendirir.

---

## âœï¸ Edit BileÅŸeni

`Components/Pages/Movies/Edit.razor` dosyasÄ±nÄ± aÃ§Ä±n.

### âœï¸ Etiket DÃ¼zeltmesi

```diff
- <label for="releasedate" class="form-label">ReleaseDate:</label>
+ <label for="releasedate" class="form-label">Release Date:</label>
```

---

### ğŸ§¾ Gizli Alan (Hidden Field)

Filmin kimliÄŸini form iÃ§inde saklar:

```razor
<input type="hidden" name="Movie.Id" value="@Movie.Id" />
```

---

### ğŸ’» Kod BloÄŸu

```csharp
private async Task UpdateMovie()
{
    using var context = DbFactory.CreateDbContext();
    context.Attach(Movie!).State = EntityState.Modified;

    try
    {
        await context.SaveChangesAsync();
    }
    catch (DbUpdateConcurrencyException)
    {
        if (!MovieExists(Movie!.Id))
        {
            NavigationManager.NavigateTo("notfound");
        }
        else
        {
            throw;
        }
    }

    NavigationManager.NavigateTo("/movies");
}

private bool MovieExists(int id)
{
    using var context = DbFactory.CreateDbContext();
    return context.Movie.Any(e => e.Id == id);
}
```

---

### ğŸ§  AÃ§Ä±klama

* `EntityState.Modified` â†’ Nesnenin deÄŸiÅŸtirildiÄŸini ve veritabanÄ±nda gÃ¼ncellenmesi gerektiÄŸini belirtir.
* `DbUpdateConcurrencyException` â†’ AynÄ± kayda baÅŸka biri tarafÄ±ndan deÄŸiÅŸiklik yapÄ±lmÄ±ÅŸsa fÄ±rlatÄ±lÄ±r.
* `NavigationManager.NavigateTo("notfound")` â†’ Film artÄ±k yoksa, kullanÄ±cÄ±yÄ± geÃ§ici bir 404 sayfasÄ±na yÃ¶nlendirir.

---

> âš ï¸ **UyarÄ±:**
>
> Form verilerini doÄŸrudan modelle baÄŸlamak, **overposting** saldÄ±rÄ±larÄ±na aÃ§Ä±k olabilir.

---

## ğŸ›¡ï¸ Overposting (AÅŸÄ±rÄ± GÃ¶nderim) SaldÄ±rÄ±larÄ±nÄ± Ã–nleme

Statik olarak oluÅŸturulmuÅŸ SSR formlarÄ± (Ã¶rneÄŸin Create ve Edit bileÅŸenleri), kÃ¶tÃ¼ niyetli kullanÄ±cÄ±larÄ±n form gÃ¶nderiminde

gÃ¶rÃ¼nmeyen alanlarÄ± deÄŸiÅŸtirmesiyle **overposting attack** riskine sahiptir.

Bu Ã¶ÄŸreticideki **Movie** modeli iÃ§in kÄ±sÄ±tlÄ± alan olmadÄ±ÄŸÄ±ndan bu risk geÃ§erli deÄŸildir.

Ancak gelecekteki projelerde dikkat edilmelidir.

### ğŸ” Ã‡Ã¶zÃ¼m:

* **ViewModel / DTO** (Data Transfer Object) kullanÄ±n.
* Form verilerini sadece DTO iÃ§indeki alanlarla sÄ±nÄ±rlayÄ±n.
* Ek veri gÃ¶nderimleri yok sayÄ±lÄ±r, bÃ¶ylece saldÄ±rÄ±lar Ã¶nlenmiÅŸ olur.

---

## ğŸ§° Sorun Giderme

Bir sorunla karÅŸÄ±laÅŸÄ±rsanÄ±z, Ã¶rnek projeye baÅŸvurabilirsiniz:

ğŸ”— **[Blazor Samples GitHub Repository (dotnet/blazor-samples)](https://github.com/dotnet/blazor-samples)**

ğŸ“‚ KlasÃ¶r: **BlazorWebAppMovies**

---

## ğŸ“š Ek Kaynaklar

* NavLink Component
* ASP.NET Core Blazor Layouts
* Razor Directives
* Blazor QuickGrid Component
* Blazor Forms Overview
* EF Core Concurrency in Blazor
* Blazor Globalization & Localization
